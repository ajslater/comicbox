services:
  comicbox-builder:
    build:
      context: .
      args:
        CODEX_BUILDER_BASE_VERSION:
    image: comicbox-builder
    container_name: comicbox-builder
  comicbox-test:
    image: comicbox-builder
    container_name: comicbox-test
    command: ./test.sh
    volumes:
      - /app/test-results/:./test-results/
  comicbox-lint:
    image: comicbox-builder
    container_name: comicbox-lint
    command: ./lint.sh
  comicbox-build:
    image: comicbox-builder
    container_name: comicbox-build
    volumes:
      - /app/dist/:./dist/
    command: poetry build
